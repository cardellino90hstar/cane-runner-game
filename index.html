
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Cane Runner - Salto Sistemato</title>
  <style>
    html, body { margin: 0; padding: 0; overflow: hidden; font-family: Arial, sans-serif; }
    canvas { display: block; background: #87ceeb; }
  </style>
</head>
<body>
<canvas id="game"></canvas>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = 300;

// Cane
const dogImg = new Image();
dogImg.src = 'dog_sprite_flipped.png';

let dog = {
  x: 100,
  y: 0,
  width: 60,
  height: 60,
  vy: 0,
  gravity: 1.2,
  jumpPower: -18,
  jumping: false,
  grounded: false
};

let groundY = canvas.height - dog.height - 20;

// Controllo tasti
let keys = {};
document.addEventListener('keydown', e => {
  keys[e.code] = true;
  if (e.code === 'Space' && dog.grounded) {
    dog.vy = dog.jumpPower;
    dog.jumping = true;
    dog.grounded = false;
    console.log('Salto!');
  }
});
document.addEventListener('keyup', e => { keys[e.code] = false; });

// Game loop
function update() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Fisica salto
  dog.vy += dog.gravity;
  dog.y += dog.vy;

  // Tocca terra
  if (dog.y >= groundY) {
    dog.y = groundY;
    dog.vy = 0;
    dog.jumping = false;
    dog.grounded = true;
  }

  // Movimento orizzontale
  if (keys['ArrowRight']) dog.x += 5;
  if (keys['ArrowLeft']) dog.x -= 5;

  // Disegna terra
  ctx.fillStyle = '#228B22';
  ctx.fillRect(0, canvas.height - 20, canvas.width, 20);

  // Disegna cane
  ctx.drawImage(dogImg, dog.x, dog.y, dog.width, dog.height);

  requestAnimationFrame(update);
}
update();
</script>
</body>
</html>
